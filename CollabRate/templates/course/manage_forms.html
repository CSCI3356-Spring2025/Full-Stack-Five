{% extends 'collabrate/base.html' %}
{% block title %}Create Form{% endblock %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'course/create_form_info.css' %}">
    <link rel="stylesheet" href="{% static 'course/course_landing.css' %}">
    <link rel="stylesheet" href="{% static 'course/sidenav.css' %}">
    <style>
        .color-select {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.color-option {
    display: flex;
    align-items: center;
    gap: 10px;
}

.color-box {
    width: 100%; 
    height: 30px;
    padding: 0;
    border: none;
    cursor: pointer;
}

        .top-banner {
            background-color: {{ course.color }}; 
        }
    </style>
{% endblock %}

{% block content %}
<div class="container-fluid p-0 m-0">
    <div class="row">

        <div class="col-md-3 p-0 m-0">
            {% include "course/sidenav.html" %}
        </div>


        <div class="col-md-6 mt-4">
            <div class="form-info" style="width: 100%; 
                max-height: 80vh; 
                overflow-y: auto;
                padding-right: 15px; 
            ">
                <div class="top-banner">
                    <h1><strong>{{ course.code }} | </strong>{{ course.title }}</h1> 
                </div>

                <form method="post" action="{% url 'create_form' join_code=course.join_code %}">
                    {% csrf_token %}

                    <div class="new-form-label">
                        <label for="formName" class="form-label"><strong>Form name:</strong></label>
                        <input type="text" id="formName" name="form_name" class="form-control" required placeholder="Untitled form" value="{{ form.name }}" />
                        <label for="formName" class="pencil"><i class="fa-solid fa-pencil"></i></label>
                    </div>

                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" style="background-color: {{ course.color }};" type="checkbox" id="selfEvaluateToggle" name="self_evaluate" {% if form.self_evaluate %}checked{% endif %}>
                        <label class="form-check-label" for="selfEvaluateToggle">Require that students self-evaluate</label>
                    </div>

                    <div class="question-count">
                        <label for="num_likert" class="form-label"><strong>Likert-Scale Questions:</strong></label>
                        <input type="number" id="num_likert" name="num_likert" class="form-control" required min="0" step="1" value="{{ form.num_likert|default:3 }}">
                    </div>

                    <div class="question-count">
                        <label for="num_open_ended" class="form-label"><strong>Open-Ended Questions:</strong></label>
                        <input type="number" id="num_open_ended" name="num_open_ended" class="form-control" required min="0" step="1" value="{{ form.num_open_ended|default:1 }}">
                    </div>

                    <div class="due-label">
                        <label for="due_date" class="form-label"><strong>Due Date:</strong></label>
                        <input type="date" id="due_date" name="due_date" class="form-control" required value="{{ form.due_date|date:'Y-m-d' }}">
                    </div>

                    <div class="due-label">
                        <label for="due_time" class="form-label"><strong>Due Time:</strong></label>
                        <input type="time" id="due_time" name="due_time" class="form-control" required value="{{ form.due_time|time:'H:i'|default:'23:59' }}">
                    </div>

                    <div class="color-select">
                        <div class="color-option">
                            <label for="color_1" class="form-label"><strong>Color 1:</strong></label>
                            <input type="color" style="width: 30px; height: 30px;" id="color_1" name="color_1" class="form-control color-box" value="{{ default_colors.color_1 }}" />
                        </div>
                    
                        <div class="color-option">
                            <label for="color_2" class="form-label"><strong>Color 2:</strong></label>
                            <input type="color" style="width: 30px; height: 30px;" id="color_2" name="color_2" class="form-control color-box" value="{{ default_colors.color_2 }}" />
                        </div>
                    
                        <div class="color-option">
                            <label for="color_3" class="form-label"><strong>Color 3:</strong></label>
                            <input type="color" style="width: 30px; height: 30px;" id="color_3" name="color_3" class="form-control color-box" value="{{ default_colors.color_3 }}" />
                        </div>
                    
                        <div class="color-option">
                            <label for="color_4" class="form-label"><strong>Color 4:</strong></label>
                            <input type="color" style="width: 30px; height: 30px;" id="color_4" name="color_4" class="form-control color-box" value="{{ default_colors.color_4 }}" />
                        </div>
                    
                        <div class="color-option">
                            <label for="color_5" class="form-label"><strong>Color 5:</strong></label>
                            <input type="color" style="width: 30px; height: 30px;" id="color_5" name="color_5" class="form-control color-box" value="{{ default_colors.color_5 }}" />
                        </div>
                    </div>


                    <button type="submit" class="btn btn-success">Continue</button>
                </form>
            </div>
        </div>

        <div class="col-md-3 p-0 m-0">
            {% include "course/view_forms_sidebar.html" %}
        </div>

    </div>
</div>
{% endblock %}
