{% extends 'collabrate/base.html' %}
{% block title %}Dashboard{% endblock %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'course/course_landing.css' %}">
<link rel="stylesheet" href="{% static 'course/sidenav.css' %}">
{% endblock %}

{% block content %}
<div class="d-flex">
    {% include "course/sidenav.html" %}

    {% if user.user_type == "student" %}
        <!-- Student view (your Figma-styled layout) -->
        <div class="main-container">
            <div class="course-header" style="background-color: {{ course.color }};"><b>{{ course.code }}</b> | {{ course.title }}</div>

            <h1 class="section-title">To Do</h1>

            {% if forms %}
                {% for form in forms %}
                    <div class="card">
                        <div class="info">
                            <p>{{form.name}}</p>
                            <small>Due {{ form.due_date|date:"M d" }} at {{ form.due_time|time:"g:i a" }}</small>
                        </div>
                        <span class="dot red"></span>
                    </div>
                {% endfor %}
            {% else %}
                <p>No forms assigned to your team.</p>
            {% endif %}

            <h1 class="section-title">Feedback</h1>
            {% if released_forms %}
                {% for form in released_forms %}
                    <a href="{% url 'peer_results' course.code '1' %}" class="text-decoration-none text-reset">
                        <div class="card">
                            <div class="info">
                                <p>{{ form.name }}</p>
                            </div>
                            <span class="dot green"></span>
                        </div>
                    </a>
                {% endfor %}  
            {% else %}
                <p>No feedback has been released yet.</p>
            {% endif %}
                     
        </div>
    {% else %}
        <!-- Professor view - unchanged from original -->
        <div class="main-container">
            <h1>Hello professor!</h1>
            <button><a href="{% url 'create_team' course.join_code %}">Create/Manage Teams</a></button>
            <button><a href="{% url 'create_form' course.join_code %}">Create Form</a></button>
            <form method="POST" action="{% url 'clear_course_forms' course.join_code %}">
                {% csrf_token %}
                <button type="submit">Clear Course Forms (TESTING PURPOSES)</button>
            </form>

        </div>
    {% endif %}
</div>
{% endblock %}

{% block script %}
{% endblock %}
